<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Translation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
    <div class="container-fluid h-100 p-0">
        <!-- Session sharing info bar -->
        {% if session_id %}
        <div class="alert alert-info py-2 mb-0 d-flex justify-content-between align-items-center" style="border-radius: 0;">
            <div>
                <strong>Multi-Device Session:</strong> Share this URL to sync across devices
                <button class="btn btn-sm btn-outline-primary ms-2" onclick="copySessionUrl()" id="copyBtn">
                    Copy Link
                </button>
            </div>
            <small class="text-muted">Session: {{ session_id[:8] }}...</small>
        </div>
        {% endif %}
        
        <div class="row g-0" style="height: {% if session_id %}calc(100vh - 60px){% else %}100vh{% endif %};" id="translation-columns">
            <!-- French Column -->
            <div class="col-4">
                <div class="translation-column h-100" data-language="french">
                    <div class="card h-100 border-0 rounded-0">
                        <div class="card-header border-0 text-center">
                            <h5 class="card-title mb-0">Français</h5>
                        </div>
                        <div class="card-body p-0">
                            <textarea 
                                class="form-control translation-input border-0 rounded-0 h-100" 
                                data-language="french"
                                placeholder="Cliquez ici pour taper en français..."
                            ></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- English Column -->
            <div class="col-4">
                <div class="translation-column h-100" data-language="english">
                    <div class="card h-100 border-0 rounded-0">
                        <div class="card-header border-0 text-center">
                            <h5 class="card-title mb-0">English</h5>
                        </div>
                        <div class="card-body p-0">
                            <textarea 
                                class="form-control translation-input border-0 rounded-0 h-100" 
                                data-language="english"
                                placeholder="Click here to type in English..."
                            ></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Polish Column -->
            <div class="col-4">
                <div class="translation-column h-100" data-language="polish">
                    <div class="card h-100 border-0 rounded-0">
                        <div class="card-header border-0 text-center">
                            <h5 class="card-title mb-0">Polski</h5>
                        </div>
                        <div class="card-body p-0">
                            <textarea 
                                class="form-control translation-input border-0 rounded-0 h-100" 
                                data-language="polish"
                                placeholder="Kliknij tutaj, aby pisać po polsku..."
                            ></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Hidden elements for JavaScript functionality -->
        <div id="error-alert" class="d-none"></div>
        <div id="error-message" class="d-none"></div>
        <div id="status-info" class="d-none"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>
    <script>
        // Pass session data to JavaScript
        window.sessionId = "{{ session_id if session_id else '' }}";
        window.sessionData = {{ session_data|tojson if session_data else '{}' }};
    </script>
    <script src="{{ url_for('static', filename='js/translator.js') }}"></script>
    <script>
        // Copy session URL to clipboard
        function copySessionUrl() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                const btn = document.getElementById('copyBtn');
                const originalText = btn.innerHTML;
                btn.innerHTML = 'Copied!';
                btn.classList.remove('btn-outline-primary');
                btn.classList.add('btn-success');
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.classList.remove('btn-success');
                    btn.classList.add('btn-outline-primary');
                }, 2000);
            });
        }
    </script>
</body>
</html>
